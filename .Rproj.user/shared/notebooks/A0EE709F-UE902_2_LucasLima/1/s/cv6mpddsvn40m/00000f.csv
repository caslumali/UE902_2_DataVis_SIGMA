"0","#| echo: false"
"0","#| results: ""hide"""
"0","## 1. Chargement du raster des températures moyennes ----"
"0","raster_temp_mean <- rast(stringr::str_glue(""{OUT_FOLDER}/TerraClimate_Mean_departements.tif""))"
"0",""
"0","# 2. Nouvelle palette de couleurs pour les températures"
"0","palette_temp <- c(""#313695"", ""#4575B4"", ""#74ADD1"", ""#FED976"", ""#F46D43"", ""#D73027"", ""#A50026"") "
"0","# Bleu → Rouge : froid à chaud"
"0",""
"0","# 3. Extraction des années à partir des noms des couches raster"
"0","annees <- 2004:2023  # 20 années de données"
"0",""
"0","# 4. Dossier temporaire pour sauvegarder les images"
"0","dir.create(""temp_images"", showWarnings = FALSE)"
"0",""
"0","# 5. Boucle pour générer une carte par année"
"0","for (i in 1:length(annees)) {"
"0","  # Sélectionner la couche raster de l'année actuelle"
"0","  temp_annee <- raster_temp_mean[[i]]"
"0","  "
"0","  # Convertir en data.frame pour ggplot2"
"0","  temp_df <- as.data.frame(temp_annee, xy = TRUE, na.rm = TRUE)"
"0","  colnames(temp_df) <- c(""x"", ""y"", ""temp"")"
"0","  "
"0","  # Générer la carte avec ggplot2"
"0","  p <- ggplot() +"
"0","    geom_raster(data = temp_df, aes(x = x, y = y, fill = temp)) +"
"0","    scale_fill_gradientn("
"0","      colors = palette_temp, "
"0","      name = ""Température\n(°C)"", "
"0","      limits = limites_temp  # Fixer les limites ici"
"0","    ) +"
"0","    labs("
"0","      title = stringr::str_glue(""Températures Moyennes - Année {annees[i]}"")"
"0","    ) +"
"0","    theme_void() +  # Retirer le grid et les axes"
"0","    theme("
"0","      plot.title = element_text(size = 14, face = ""bold"", hjust = 0.5),"
"0","      legend.position = ""right"","
"0","      legend.title = element_text(size = 10, face = ""bold""),"
"0","      legend.text = element_text(size = 8)"
"0","    )"
"0","  "
"0","  # Sauvegarder l'image temporaire"
"0","  ggsave(filename = stringr::str_glue(""temp_images/temp_{annees[i]}.png""),"
"0","         plot = p, width = 6, height = 5, dpi = 300)"
"0","  "
"0","  cat(""Carte générée pour l'année :"", annees[i], ""\n"")"
"0","}"
"1","Carte générée pour l'année :"
"1"," "
"1","2004"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2005"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2006"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2007"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2008"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2009"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2010"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2011"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2012"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2013"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2014"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2015"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2016"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2017"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2018"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2019"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2020"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2021"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2022"
"1"," "
"1","
"
"1","Carte générée pour l'année :"
"1"," "
"1","2023"
"1"," "
"1","
"
